@import "../Variables/Couleurs.scss";
@import "../Variables/Layout.scss";
@import "../Variables/Polices.scss";

.UnCours
{
  z-index: 0;
  display: flex;
  flex-flow: column;
  width: 100%;
  transition: all 0.2s ease-in-out;
  color: $off-white;
  text-shadow: 0 0 4px black;
  //media queries for stacking cards

  @media screen and (min-width: $layout-tablette)
  {
      width: calc((100% / 2) - #{$gap-grille-cours});
  }

  @media screen and (min-width:$layout-desktop)
  {
      width: calc((100% / 3) - #{$gap-grille-cours});
  }
  
  .carte
  {
    transition: all 0.2s ease-in-out;
    display: flex;
    flex-flow: column;
    justify-content: space-between;
    position: relative;
    background-color: $couleur-primaire;
    width: 100%;
    height: 500px;

    .header
    {
      width: 100%;
      height: 20%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }

    h2
    {
      font-size: 1.25em;
      margin: auto;
    }

    h3
    {
      font-size: 1em;
      margin: auto;
    }

    .image-container
    {
        height: 50%;
        width: 100%;
        background-color: $off-white;

        img
        {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    }

    div.description
    {
      height: 30%;
      display: flex;
      flex-direction: column;
      justify-content: center;

      p
      {
        text-align: center;
        margin: 0;
        font-size: $font-size-cours-desc;
        // padding: 0.5em;
      }
    }

    &:hover
    {
      outline: $hover-border;
      border-radius: 20px;
      transform: scale(1.02);
    }
  }

  .ExpanderSection
  {
    overflow: visible;

    .cours-details
    {
      transition: all 0.2s ease-in-out;
      display: flex;
      justify-content: center;
      position: relative;
      background-color: $couleur-primaire;

      .details-container
      {
        display: flex;
        flex-flow: row;
        gap: 1rem;
        padding: 0.9rem;
        max-height: inherit;
        outline: $hover-border;
        outline-color: #ffb700;
        border-radius: $coin-ronds;

        .cours
        {
          &-carrousel
          {
            flex-basis: 50%;
          }

          &-description
          {
            background-color: $couleur-secondaire;
            border: 3px dashed $couleur-quinaire;
            padding: 1em;
            flex-basis: 30%;
            max-height: inherit;

            p
            {
              max-height: calc(50vh - 5rem);
              overflow: auto;
              margin-top: 1em;
              padding: 1em;
              height: 90%;
            }
          }

          &-projets-relies
          {
            flex-basis: 20%;
          }
        }
      }
    }
  }

  &[expanderstate="true"]
  {
    z-index: 1;

    .carte
    {
      outline: $hover-border;
      outline-color: #ffb700;
      border-radius: $coin-ronds;
    }
    
    .carte::after
    {
      content: "";
      opacity: 1;
      display: block;
      height: 0;
      width: 0;
      position: absolute;
      top: calc(100% + 1rem + 2px);
      left: calc(50% - 15px);
      border-left: 15px solid transparent;
      border-right: 15px solid transparent;
      border-bottom: 15px solid #ffb700;
    }

    .cours-details
    {
      margin-top: $gap-grille-cours;
      max-height: 50vh;
      min-height: 30vh;
      overflow: visible;
      opacity: 1;
    }
  }

  &[expanderstate="false"]
  {
    .cours-details
    {
      max-height: 0;
      min-height: 0;
      overflow: hidden;
      opacity: 0;
      margin: 0;
    }
  }

  @media screen and (min-width: $layout-desktop)
  {
    &:nth-of-type(3n+2) .cours-details
    {
      margin-left: calc(-100% - #{$gap-grille-cours});
    }

    &:nth-of-type(3n+3) .cours-details
    {
      margin-left: calc(-200% - (#{$gap-grille-cours} * 2));
    }

    &:nth-of-type(3n+4)
    {
      clear: left;
    }

    .cours-details
    {
      width: calc(300% + (#{$gap-grille-cours} * 2));
    }  
  }

  @media screen and (min-width: $layout-tablette) and (max-width: $layout-desktop) {

    &:nth-of-type(2n+2) .cours-details
    {
      margin-left: calc(-100% - #{$gap-grille-cours});
    }

    &:nth-of-type(2n+3)
    {
      clear: left;
    }

    .cours-details
    {
      width: calc(200% + #{$gap-grille-cours});
    }
  }
}

